<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DOƒûA DEDEKTƒ∞FLERƒ∞ OYUNU - Sorun + Doƒüa Kartlarƒ±</title>
    <style>
        @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap");

        body {
            font-family: "Poppins", sans-serif;
            background-color: #f0f4f8;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        /* Giri≈ü Ekranƒ± */
        #setup-screen {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 10;
        }

        input {
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            width: 250px;
            text-align: center;
        }

        /* Oyun Ekranƒ± */
        #game-screen {
            display: none;
            width: 95%;
            max-width: 1200px;
            flex-direction: column;
            align-items: center;
            padding: 20px 0 40px;
        }

        .cards-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            width: 100%;
            flex-wrap: wrap;
            flex-direction: row-reverse; /* 1. grup saƒüda, 2. grup solda */
        }

        .card-area {
            flex: 1;
            min-width: 320px;
            max-width: 540px;
            text-align: center;
        }

        .group-name {
            font-size: 1.6rem;
            font-weight: 800;
            color: #333;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .cards-row {
            display: flex;
            gap: 15px;
            justify-content: center;
            align-items: flex-start;
            flex-wrap: wrap;
        }

        .single-card-block {
            flex: 1;
            min-width: 220px;
            max-width: 260px;
            text-align: center;
        }

        .sub-title {
            font-size: 0.95rem;
            font-weight: 600;
            color: #555;
            margin: 10px 0 5px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Kart Tasarƒ±mƒ± */
        .card {
            background: white;
            border-radius: 20px;
            padding: 15px;
            height: 380px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            border: 5px solid transparent;
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card.hidden-card {
            background: #e0e0e0;
            justify-content: center;
            border-color: #ccc;
        }

        .category-badge {
            padding: 6px 18px;
            border-radius: 20px;
            color: white;
            font-weight: 800;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 8px;
        }

        .card-title {
            font-size: 1.4rem;
            font-weight: 800;
            margin: 0 0 8px;
            color: #2c3e50;
            line-height: 1.2;
            text-align: center;
        }

        .small-title {
            font-size: 1.2rem;
        }

        .card-image {
            width: 100%;
            max-width: 100%;
            max-height: 240px;
            height: auto;
            border-radius: 15px;
            object-fit: contain;
            margin-top: 10px;
            margin-bottom: 10px;
            flex: 0 0 auto;
        }

        /* Renk Temalarƒ± (Doƒüa kartlarƒ± kategorilerine g√∂re) */
        .water {
            border-color: #3498db;
        }
        .water .category-badge {
            background-color: #3498db;
        }

        .light {
            border-color: #f1c40f;
        }
        .light .category-badge {
            background-color: #f1c40f;
            color: #444;
        }

        .air {
            border-color: #95a5a6;
        }
        .air .category-badge {
            background-color: #95a5a6;
        }

        .energy {
            border-color: #2ecc71;
        }
        .energy .category-badge {
            background-color: #2ecc71;
        }

        .sound {
            border-color: #9b59b6;
        }
        .sound .category-badge {
            background-color: #9b59b6;
        }

        /* Sorun kartƒ± rengi */
        .problem {
            border-color: #e67e22;
        }
        .problem .category-badge {
            background-color: #e67e22;
        }

        /* Butonlar */
        button {
            background: linear-gradient(135deg, #ff6b6b, #ee5253);
            color: white;
            border: none;
            padding: 14px 40px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 10px 20px rgba(238, 82, 83, 0.3);
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 20px;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 25px rgba(238, 82, 83, 0.4);
        }

        button:active {
            transform: translateY(1px);
        }

        .small-button {
            padding: 6px 18px;
            font-size: 0.85rem;
            margin-top: 8px;
            box-shadow: 0 5px 10px rgba(238, 82, 83, 0.25);
        }

        /* Animasyon */
        .animate-flip {
            animation: flipIn 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes flipIn {
            0% {
                transform: rotateY(90deg);
                opacity: 0;
            }
            100% {
                transform: rotateY(0);
                opacity: 1;
            }
        }

        #result-section {
            text-align: center;
            margin-top: 25px;
        }

        #result-section h2 {
            margin-bottom: 10px;
            color: #2c3e50;
        }

        #timer-setup {
            margin-top: 5px;
            font-size: 1rem;
        }

        #minutes-input {
            width: 70px;
            padding: 5px;
            border-radius: 8px;
            border: 1px solid #ccc;
            text-align: center;
            margin-left: 5px;
            margin-right: 5px;
        }

        #timer-display {
            margin-top: 10px;
            font-size: 2.4rem; /* BURADAN B√úY√úT√úP K√ú√á√úLTEBƒ∞Lƒ∞RSƒ∞N */
            font-weight: 600;
            color: #2c3e50;
        }

        #timer-message {
            margin-top: 8px;
            font-size: 1rem;
        }
    </style>
</head>
<body>
    <!-- Gƒ∞Rƒ∞≈û EKRANI -->
    <div id="setup-screen">
        <h1 style="color: #2c3e50">üß¨ DOƒûA DEDEKTƒ∞FLERƒ∞ OYUNU </h1>
        <p>L√úTFEN GRUP ƒ∞Sƒ∞MLERƒ∞Nƒ∞ YAZINIZ:</p>
        <input type="text" id="group1-input" placeholder="1. Grup Adƒ±" />
        <input type="text" id="group2-input" placeholder="2. Grup Adƒ±" />
        <button onclick="startGame()">Oyuna Ba≈üla üöÄ</button>
    </div>

    <!-- OYUN EKRANI -->
    <div id="game-screen">
        <div class="cards-container">
            <!-- Grup 2 solda -->
            <div class="card-area">
                <div class="group-name" id="display-group2">2. Grup</div>
                <div class="cards-row">
                    <div class="single-card-block">
                        <div class="sub-title">Sorun Kartƒ±</div>
                        <div class="card hidden-card" id="problem-card2">
                            <div style="font-size: 3rem">‚ùì</div>
                            <p>Sorun kartƒ± bekleniyor</p>
                        </div>
                        <button
                            class="small-button"
                            id="btn-problem2"
                            onclick="drawProblemCard(2)"
                        >
                            Kart √áek
                        </button>
                    </div>

                    <div class="single-card-block">
                        <div class="sub-title">Doƒüa Kartƒ±</div>
                        <div class="card hidden-card" id="nature-card2">
                            <div style="font-size: 3rem">‚ùì</div>
                            <p>Doƒüa kartƒ± bekleniyor</p>
                        </div>
                        <button
                            class="small-button"
                            id="btn-nature2"
                            onclick="drawNatureCard(2)"
                        >
                            Kart √áek
                        </button>
                    </div>
                </div>
            </div>

            <!-- Grup 1 saƒüda -->
            <div class="card-area">
                <div class="group-name" id="display-group1">1. Grup</div>
                <div class="cards-row">
                    <div class="single-card-block">
                        <div class="sub-title">Sorun Kartƒ±</div>
                        <div class="card hidden-card" id="problem-card1">
                            <div style="font-size: 3rem">‚ùì</div>
                            <p>Sorun kartƒ± bekleniyor</p>
                        </div>
                        <button
                            class="small-button"
                            id="btn-problem1"
                            onclick="drawProblemCard(1)"
                        >
                            Kart √áek
                        </button>
                    </div>

                    <div class="single-card-block">
                        <div class="sub-title">Doƒüa Kartƒ±</div>
                        <div class="card hidden-card" id="nature-card1">
                            <div style="font-size: 3rem">‚ùì</div>
                            <p>Doƒüa kartƒ± bekleniyor</p>
                        </div>
                        <button
                            class="small-button"
                            id="btn-nature1"
                            onclick="drawNatureCard(1)"
                        >
                            Kart √áek
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="result-section" style="display: none">
            <h2>Haydi ≈üimdi sorunu √ß√∂zelim! üéØ</h2>

            <div id="timer-setup">
                <label for="minutes-input">S√ºre (dakika):</label>
                <input
                    type="number"
                    id="minutes-input"
                    min="1"
                    max="60"
                    value="5"
                />
                <button
                    class="small-button"
                    id="timer-button"
                    onclick="startTimer()"
                >
                    Zamanlayƒ±cƒ±yƒ± Ba≈ülat
                </button>
                <button
                    class="small-button"
                    id="pause-button"
                    onclick="togglePause()"
                    disabled
                >
                    Duraklat
                </button>
            </div>

            <div id="timer-display"></div>
            <div id="timer-message"></div>

            <button onclick="restartGame()" style="margin-top: 18px">
                Yeniden Ba≈üla üîÅ
            </button>
        </div>
    </div>

    <script>
        /* 1) Sorun kartlarƒ± (hepsi .jpg) */
        const problemCardsData = [
            {
                title: "KART 1 ‚Äì SU TASARRUFU",
                image: "sorun-1-su-tasarrufu.jpg",
            },
            {
                title: "KART 2 ‚Äì ENERJƒ∞ VERƒ∞MLƒ∞Lƒ∞ƒûƒ∞",
                image: "sorun-2-enerji-verimliligi.jpg",
            },
            {
                title: "KART 3 ‚Äì TRAFƒ∞K PROBLEMƒ∞",
                image: "sorun-3-trafik-problemi.jpg",
            },
            {
                title: "KART 4 ‚Äì √á√ñP Y√ñNETƒ∞Mƒ∞",
                image: "sorun-4-cop-yonetimi.jpg",
            },
            {
                title: "KART 5 ‚Äì HAVA Kƒ∞RLƒ∞Lƒ∞ƒûƒ∞",
                image: "sorun-5-hava-kirliligi.jpg",
            },
            {
                title: "KART 6 ‚Äì ACƒ∞L BARINAK",
                image: "sorun-6-acil-barinak.jpg",
            },
            {
                title: "KART 7 ‚Äì Yƒ∞YECEK DEPOLAMA",
                image: "sorun-7-yiyecek-depolama.jpg",
            },
            {
                title: "KART 8 ‚Äì GRUP KOORDƒ∞NASYONU",
                image: "sorun-8-grup-koordinasyonu.jpg",
            },
            {
                title: "KART 9 ‚Äì ≈ûEHƒ∞R ISISI",
                image: "sorun-9-sehir-isisi.jpg",
            },
            {
                title: "KART 10 ‚Äì TA≈ûIMA Sƒ∞STEMƒ∞",
                image: "sorun-10-tasima-sistemi.jpg",
            },
            {
                title: "KART 11 ‚Äì G√úNE≈û ENERJƒ∞Sƒ∞ KULLANIMI",
                image: "sorun-11-gunes-enerjisi.jpg",
            },
            {
                title: "KART 12 ‚Äì G√úR√úLT√ú Kƒ∞RLƒ∞Lƒ∞ƒûƒ∞",
                image: "sorun-12-gurultu-kirliligi.jpg",
            },
            {
                title: "KART 13 ‚Äì TOPRAK EROZYONU",
                image: "sorun-13-toprak-erozyonu.jpg",
            },
            {
                title: "KART 14 ‚Äì BESLENME VE GIDA ƒ∞SRAFI",
                image: "sorun-14-beslenme-gida-israfi.jpg",
            },
            {
                title: "KART 15 ‚Äì ULA≈ûIM VE ENERJƒ∞",
                image: "sorun-15-ulasim-ve-enerji.jpg",
            },
        ];

        /* 2) Doƒüa kartlarƒ± (hepsi .jpg) */
        const natureCardsData = [
            // WATER
            { title: "Mƒ∞DYE", category: "WATER", image: "midye.jpg" },
            {
                title: "K√ñPEK BALIƒûI",
                category: "WATER",
                image: "kopek-baligi.jpg",
            },
            { title: "NEHƒ∞R", category: "WATER", image: "nehir.jpg" },
            { title: "KAKT√úS", category: "WATER", image: "kaktus.jpg" },
            { title: "LOTUS", category: "WATER", image: "lotus.jpg" },
            {
                title: "DENƒ∞Z KABUƒûU",
                category: "WATER",
                image: "deniz-kabugu.jpg",
            },

            // LIGHT
            {
                title: "DENƒ∞Z S√úNGERƒ∞",
                category: "LIGHT",
                image: "deniz-sungeri.jpg",
            },
            { title: "DOMATES", category: "LIGHT", image: "domates.jpg" },
            { title: "MERCAN", category: "LIGHT", image: "mercan.jpg" },
            {
                title: "ATE≈û B√ñCEKLERƒ∞",
                category: "LIGHT",
                image: "ates-bocekleri.jpg",
            },
            { title: "√ñR√úMCEK", category: "LIGHT", image: "orumcek.jpg" },
            { title: "KELEBEK", category: "LIGHT", image: "kelebek.jpg" },

            // AIR
            { title: "TERMƒ∞T", category: "AIR", image: "termit.jpg" },
            {
                title: "KERTENKELE",
                category: "AIR",
                image: "kertenkele.jpg",
            },
            { title: "ZEBRA", category: "AIR", image: "zebra.jpg" },
            { title: "B√ñCEK", category: "AIR", image: "bocek.jpg" },
            { title: "KURT√áUK", category: "AIR", image: "kurtcuk.jpg" },
            { title: "YUSUF√áUK", category: "AIR", image: "yusufcuk.jpg" },

            // ENERGY
            { title: "KARTAL", category: "ENERGY", image: "kartal.jpg" },
            {
                title: "ALABALIK",
                category: "ENERGY",
                image: "alabalik.jpg",
            },
            {
                title: "DULAVRATOTU",
                category: "ENERGY",
                image: "dulavratotu.jpg",
            },
            { title: "KABUK", category: "ENERGY", image: "kabuk.jpg" },
            { title: "BAMBU", category: "ENERGY", image: "bambu.jpg" },
            { title: "AƒûA√á", category: "ENERGY", image: "agac.jpg" },

            // SOUND
            { title: "BALƒ∞NA", category: "SOUND", image: "balina.jpg" },
            { title: "ASLAN", category: "SOUND", image: "aslan.jpg" },
            { title: "MANTAR", category: "SOUND", image: "mantar.jpg" },
            { title: "YARASA", category: "SOUND", image: "yarasa.jpg" },
            {
                title: "YALI√áAPKINI",
                category: "SOUND",
                image: "yalicapkini.jpg",
            },
            { title: "BAYKU≈û", category: "SOUND", image: "baykus.jpg" },
        ];

        // Kullanƒ±lan kart indekslerini tutalƒ±m ki m√ºmk√ºnse tekrar etmesin
        let usedProblemIndexes = [];
        let usedNatureIndexes = [];

        // Hangi kartlar √ßekildi takibi (en az 1 kez)
        let drawnProblem1 = false;
        let drawnProblem2 = false;
        let drawnNature1 = false;
        let drawnNature2 = false;

        // Her kart i√ßin ka√ß kez √ßekildi? (max 2 = ilk kart + 1 deƒüi≈üiklik)
        let drawCounts = {
            problem1: 0,
            problem2: 0,
            nature1: 0,
            nature2: 0,
        };

        // Zamanlayƒ±cƒ±
        let timerInterval = null;
        let timerRunning = false;
        let remainingSeconds = 0;

        function startGame() {
            const group1Input = document.getElementById("group1-input").value;
            const group2Input = document.getElementById("group2-input").value;

            document.getElementById("display-group1").innerText =
                group1Input || "1. Grup";
            document.getElementById("display-group2").innerText =
                group2Input || "2. Grup";

            document.getElementById("setup-screen").style.display = "none";
            document.getElementById("game-screen").style.display = "flex";
        }

        function getUniqueIndex(length, usedArray) {
            if (usedArray.length >= length) {
                usedArray.length = 0; // hepsi kullanƒ±ldƒ±ysa sƒ±fƒ±rla
            }
            let idx;
            do {
                idx = Math.floor(Math.random() * length);
            } while (usedArray.includes(idx));
            usedArray.push(idx);
            return idx;
        }

        function createProblemCardHTML(cardData, id) {
            return `
                <div class="card problem animate-flip" id="${id}">
                    <div class="category-badge">SORUN</div>
                    <div class="card-title small-title">${cardData.title}</div>
                    <img src="${cardData.image}" alt="${cardData.title}" class="card-image">
                </div>
            `;
        }

        function createNatureCardHTML(cardData, id) {
            const themeClass = cardData.category.toLowerCase();
            return `
                <div class="card ${themeClass} animate-flip" id="${id}">
                    <div class="category-badge">${cardData.category}</div>
                    <div class="card-title">${cardData.title}</div>
                    <img src="${cardData.image}" alt="${cardData.title}" class="card-image">
                </div>
            `;
        }

        function drawProblemCard(group) {
            const key = group === 1 ? "problem1" : "problem2";
            const btnId = group === 1 ? "btn-problem1" : "btn-problem2";
            const btn = document.getElementById(btnId);

            if (drawCounts[key] >= 2) {
                btn.disabled = true;
                btn.textContent = "Deƒüi≈ütirme hakkƒ±nƒ±z t√ºkendi";
                return;
            }

            const idx = getUniqueIndex(
                problemCardsData.length,
                usedProblemIndexes
            );
            const cardId = group === 1 ? "problem-card1" : "problem-card2";
            const cardElem = document.getElementById(cardId);
            cardElem.outerHTML = createProblemCardHTML(
                problemCardsData[idx],
                cardId
            );

            drawCounts[key]++;

            if (drawCounts[key] >= 2) {
                btn.disabled = true;
                btn.textContent = "Deƒüi≈ütirme hakkƒ±nƒ±z t√ºkendi";
            }

            if (group === 1) drawnProblem1 = true;
            else drawnProblem2 = true;

            checkAllDrawn();
        }

        function drawNatureCard(group) {
            const key = group === 1 ? "nature1" : "nature2";
            const btnId = group === 1 ? "btn-nature1" : "btn-nature2";
            const btn = document.getElementById(btnId);

            if (drawCounts[key] >= 2) {
                btn.disabled = true;
                btn.textContent = "Deƒüi≈ütirme hakkƒ±nƒ±z t√ºkendi";
                return;
            }

            const idx = getUniqueIndex(
                natureCardsData.length,
                usedNatureIndexes
            );
            const cardId = group === 1 ? "nature-card1" : "nature-card2";
            const cardElem = document.getElementById(cardId);
            cardElem.outerHTML = createNatureCardHTML(
                natureCardsData[idx],
                cardId
            );

            drawCounts[key]++;

            if (drawCounts[key] >= 2) {
                btn.disabled = true;
                btn.textContent = "Deƒüi≈ütirme hakkƒ±nƒ±z t√ºkendi";
            }

            if (group === 1) drawnNature1 = true;
            else drawnNature2 = true;

            checkAllDrawn();
        }

        function checkAllDrawn() {
            if (drawnProblem1 && drawnProblem2 && drawnNature1 && drawnNature2) {
                document.getElementById("result-section").style.display =
                    "block";
            }
        }

        function startTimer() {
            if (timerRunning) return;

            const minutes = parseInt(
                document.getElementById("minutes-input").value,
                10
            );
            if (isNaN(minutes) || minutes <= 0) {
                alert("L√ºtfen ge√ßerli bir dakika deƒüeri giriniz.");
                return;
            }

            remainingSeconds = minutes * 60;
            timerRunning = true;

            const timerButton = document.getElementById("timer-button");
            timerButton.disabled = true;

            const pauseButton = document.getElementById("pause-button");
            pauseButton.disabled = false;
            pauseButton.textContent = "Duraklat";

            document.getElementById("timer-message").textContent = "";
            updateTimerDisplay(remainingSeconds);

            timerInterval = setInterval(tickTimer, 1000);
        }

        function tickTimer() {
            remainingSeconds--;
            if (remainingSeconds <= 0) {
                clearInterval(timerInterval);
                timerRunning = false;
                document.getElementById("timer-display").textContent = "00:00";
                document.getElementById("timer-message").textContent =
                    "S√ºre bitti, l√ºtfen sunumunuzu yapƒ±nƒ±z.";
                const pauseButton = document.getElementById("pause-button");
                pauseButton.disabled = true;
            } else {
                updateTimerDisplay(remainingSeconds);
            }
        }

        function updateTimerDisplay(sec) {
            const m = Math.floor(sec / 60);
            const s = sec % 60;
            const mm = (m < 10 ? "0" : "") + m;
            const ss = (s < 10 ? "0" : "") + s;
            document.getElementById("timer-display").textContent =
                mm + ":" + ss;
        }

        function togglePause() {
            const pauseButton = document.getElementById("pause-button");

            // √áalƒ±≈üƒ±yorsa ‚Üí duraklat
            if (timerRunning) {
                timerRunning = false;
                clearInterval(timerInterval);
                pauseButton.textContent = "Devam Et";
                document.getElementById("timer-message").textContent =
                    "Zamanlayƒ±cƒ± duraklatƒ±ldƒ±.";
            }
            // Duraklatƒ±lmƒ±≈ü ve s√ºre kaldƒ±ysa ‚Üí devam et
            else if (!timerRunning && remainingSeconds > 0) {
                timerRunning = true;
                pauseButton.textContent = "Duraklat";
                document.getElementById("timer-message").textContent = "";
                timerInterval = setInterval(tickTimer, 1000);
            }
        }

        function restartGame() {
            location.reload();
        }
    </script>
</body>
</html>
